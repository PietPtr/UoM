{% extends 'base.html' %}

{% block content %}


    <h1>{{ course.name }}</h1>

    <p>{{course.description}}</p>

    <h4 class="navbar" id="aim_header">Aims</h4>

    <ul id="aim_list" class="list-group list-group-flush">
    <a href="/teacher/new_aim/{{course.id}}" class="list-group-item list-group-item-action">
        <strong>New aim</strong>
    </a>
    {% for aim in aims %}
        <a href="/teacher/aim/{{aim.id}}" class="list-group-item list-group-item-action">
            <div class="d-flex justify-content-between">
                {{aim.description}}
                <form action="{% url 'delete_aim' aim.id %}" method="post">
                    {% csrf_token %}
                    <input type="submit" value="x" class="delete_button">
                </form>
            </div>
        </a>
    {% endfor %}
    </ul>

    <h4 class="navbar" id="action_header">Actions</h4>
    <ul class="list-group list-group-flush" id="action_list">
        <a href="/teacher/new_action/{{course.id}}" class="list-group-item list-group-item-action">
            <strong>New action</strong>
        </a>
    {% for action in actions %}
        <a href="/teacher/action/{{action.id}}" class="list-group-item list-group-item-action">
            <div class="d-flex justify-content-between">
                {{action.description}}
                <form action="{% url 'delete_action' action.id %}" method="post">
                    {% csrf_token %}
                    <input type="submit" value="x" class="delete_button">
                </form>
            </div>
        </a>
    {% endfor %}
    </ul>

    <h4 class="navbar" id="materials_header">Materials</h4>
    <ul class="list-group list-group-flush" id="materials_list">
        <a href="/teacher/new_material/{{course.id}}" class="list-group-item list-group-item-action">
            <strong>Upload new material</strong>
        </a>
    {% for material in materials %}
        <a href="{{ material.file.url }}" class="list-group-item list-group-item-action">
            <div class="d-flex justify-content-between">
                {{material.file.name}}
                <form action="{% url 'delete_material' material.id %}" method="post">
                    {% csrf_token %}
                    <input type="submit" value="x" class="delete_button">
                </form>
            </div>
        </a>
        
    {% endfor %}


    </ul>

    <script>
    // TODO: dit is eigenlijk onacceptabel gebeun, gebruik gewoon jquery
    let comps = ["aim", "action", "materials"]

    function toggle_visible(e) {
        let state = aim_list.style.display;
    }

    comps.map(comp => {
        document.getElementById(comp + "_header").onclick = () => {
            let list = document.getElementById(comp + "_list");
            list.style.display = list.style.display == "none" ? "" : "none";
        };
    })

    
    </script>

{% endblock %}