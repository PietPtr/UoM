{% extends 'teacher.html' %}

{% block content %}


    <h1>{{ course.name }}</h1>
    <a href="details" class="btn btn-secondary btn-lg course-edit">
        <i class="fa fa-edit"></i> Edit course
    </a>

    <p>Study load: {{study_load}} hours.</p>

    <div class="course-description">
        <p>{{course.description|linebreaks}}</p>
    </div>

    <h4 class="navbar" id="aim_header">Aims</h4>

    <ul id="aim_list" class="list-group list-group-flush">
    <a href="/teacher/new_aim/{{course.id}}" class="list-group-item list-group-item-action">
        <strong>New aim</strong>
    </a>
    {% for aim in aims %}
        <a href="/teacher/aim/{{aim.id}}" class="list-group-item list-group-item-action">
            <div class="d-flex justify-content-between">
                {{aim.description}}
                <form action="{% url 'delete_aim' aim.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="hover-button delete-button">
                        <i class="fa fa-trash"></i>
                    </button>
                </form>
            </div>
        </a>
    {% endfor %}
    </ul>

    <h4 class="navbar" id="action_header">Actions</h4>
    <ul class="list-group list-group-flush" id="action_list">
        <a href="/teacher/new_action/{{course.id}}" class="list-group-item list-group-item-action">
            <strong>New action</strong>
        </a>
    {% for action in actions %}
        <a href="/teacher/action/{{action.id}}" class="list-group-item list-group-item-action">
            <div class="d-flex justify-content-between">
                {{action.description}}
                <div class="d-flex">
                    <!-- TODO: dit is kut met forms, gebruik javascript? -->
                    <form action="{% url 'edit_action_order' action.id %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="direction" value="up">
                        <button type="submit" class="hover-button other-button">
                            <i class="fa fa-arrow-up"></i>
                        </button>
                    </form>

                    <form action="{% url 'edit_action_order' action.id %}" method="post">
                        {% csrf_token %}
                        <input type="hidden" name="direction" value="down">
                        <button type="submit" class="hover-button other-button">
                            <i class="fa fa-arrow-down"></i>
                        </button>
                    </form>

                    <form action="{% url 'delete_action' action.id %}" method="post">
                        {% csrf_token %}
                        <button type="submit" class="delete-button hover-button">
                            <i class="fa fa-trash"></i>
                        </button>
                    </form>
                </div>
            </div>
        </a>
    {% endfor %}
    </ul>

    <h4 class="navbar" id="materials_header">Materials</h4>
    <ul class="list-group list-group-flush" id="materials_list">
        <a href="/teacher/new_material/{{course.id}}" class="list-group-item list-group-item-action">
            <strong>Upload new material</strong>
        </a>
    {% for material in materials %}
        <a href="{{ material.file.url }}" class="list-group-item list-group-item-action">
            <div class="d-flex justify-content-between">
                {{material.file.name}}
                <form action="{% url 'delete_material' material.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" class="hover-button delete-button">
                        <i class="fa fa-trash"></i>
                    </button>
                </form>
            </div>
        </a>
        
    {% endfor %}


    </ul>

    <script>
    // TODO: dit is eigenlijk onacceptabel gebeun, gebruik gewoon jquery
    let comps = ["aim", "action", "materials"]

    function toggle_visible(e) {
        let state = aim_list.style.display;
    }

    comps.map(comp => {
        document.getElementById(comp + "_header").onclick = () => {
            let list = document.getElementById(comp + "_list");
            list.style.display = list.style.display == "none" ? "" : "none";
        };
    })

    
    </script>

{% endblock %}